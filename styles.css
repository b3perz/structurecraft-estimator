/* ============================================
   STRUCTURECRAFT ESTIMATOR PRO - Design System
   ============================================ */

/* --- RESET & BASE --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 14px; scroll-behavior: smooth; }
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.6;
  overflow: hidden;
  height: 100vh;
  transition: background 0.4s ease, color 0.4s ease;
}
::selection { background: var(--accent); color: var(--bg-primary); }
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
input, textarea, select, button { font-family: inherit; }
a { color: var(--accent); text-decoration: none; }

/* --- THEME SYSTEM: 10 Themes --- */

/* 1. Midnight (Default) - Deep navy + warm beige */
[data-theme="midnight"] {
  --bg-primary: #0a0e1a;
  --bg-secondary: #111827;
  --bg-tertiary: #1a2035;
  --bg-card: #141b2d;
  --bg-card-hover: #1a2340;
  --bg-input: #0d1220;
  --border: #1e2a45;
  --border-light: #162035;
  --text-primary: #e8dcc8;
  --text-secondary: #b8a990;
  --text-muted: #6b5e50;
  --text-inverse: #0a0e1a;
  --accent: #c8956c;
  --accent-hover: #d4a67d;
  --accent-muted: rgba(200,149,108,0.15);
  --success: #5cb87a;
  --success-muted: rgba(92,184,122,0.15);
  --warning: #d4a03c;
  --warning-muted: rgba(212,160,60,0.15);
  --danger: #c75a5a;
  --danger-muted: rgba(199,90,90,0.15);
  --info: #5a8ec7;
  --info-muted: rgba(90,142,199,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(200,149,108,0.1);
}

/* 2. Daylight - Clean white + dark text */
[data-theme="daylight"] {
  --bg-primary: #f5f2ed;
  --bg-secondary: #ebe7e0;
  --bg-tertiary: #e0dbd3;
  --bg-card: #ffffff;
  --bg-card-hover: #faf8f5;
  --bg-input: #f8f6f2;
  --border: #d4cfc7;
  --border-light: #e8e4dc;
  --text-primary: #1a1a2e;
  --text-secondary: #4a4a5e;
  --text-muted: #8a8a9e;
  --text-inverse: #ffffff;
  --accent: #8b5e3c;
  --accent-hover: #a06e48;
  --accent-muted: rgba(139,94,60,0.1);
  --success: #2d8a4e;
  --success-muted: rgba(45,138,78,0.1);
  --warning: #b8860b;
  --warning-muted: rgba(184,134,11,0.1);
  --danger: #b83232;
  --danger-muted: rgba(184,50,50,0.1);
  --info: #2563eb;
  --info-muted: rgba(37,99,235,0.1);
  --shadow: 0 2px 12px rgba(0,0,0,0.08);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
  --glow: none;
}

/* 3. Wabi-Sabi - Japanese minimalism, muted earth tones */
[data-theme="wabi-sabi"] {
  --bg-primary: #1a1916;
  --bg-secondary: #22211c;
  --bg-tertiary: #2a2822;
  --bg-card: #1e1d18;
  --bg-card-hover: #28261f;
  --bg-input: #16150f;
  --border: #3a3730;
  --border-light: #2e2c25;
  --text-primary: #c4b8a0;
  --text-secondary: #968a72;
  --text-muted: #5e5444;
  --text-inverse: #1a1916;
  --accent: #8b7355;
  --accent-hover: #a08668;
  --accent-muted: rgba(139,115,85,0.15);
  --success: #6b8a5e;
  --success-muted: rgba(107,138,94,0.15);
  --warning: #a89050;
  --warning-muted: rgba(168,144,80,0.15);
  --danger: #8a5050;
  --danger-muted: rgba(138,80,80,0.15);
  --info: #5a7a8a;
  --info-muted: rgba(90,122,138,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.35);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.45);
  --glow: none;
}

/* 4. Blueprint - Technical drawing aesthetic */
[data-theme="blueprint"] {
  --bg-primary: #0a1628;
  --bg-secondary: #0f1e35;
  --bg-tertiary: #142640;
  --bg-card: #0d1a30;
  --bg-card-hover: #122240;
  --bg-input: #081422;
  --border: #1e3a5a;
  --border-light: #162e4a;
  --text-primary: #a8c4e0;
  --text-secondary: #7a9abb;
  --text-muted: #4a6a8a;
  --text-inverse: #0a1628;
  --accent: #4a9eff;
  --accent-hover: #6ab0ff;
  --accent-muted: rgba(74,158,255,0.15);
  --success: #4acc8a;
  --success-muted: rgba(74,204,138,0.15);
  --warning: #e0a030;
  --warning-muted: rgba(224,160,48,0.15);
  --danger: #ff6a6a;
  --danger-muted: rgba(255,106,106,0.15);
  --info: #4a9eff;
  --info-muted: rgba(74,158,255,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(74,158,255,0.08);
}

/* 5. Timber - Warm wood tones */
[data-theme="timber"] {
  --bg-primary: #1a1210;
  --bg-secondary: #221a16;
  --bg-tertiary: #2a201a;
  --bg-card: #1e1612;
  --bg-card-hover: #2a1e18;
  --bg-input: #14100c;
  --border: #3e302a;
  --border-light: #302420;
  --text-primary: #d4c4a8;
  --text-secondary: #a8946e;
  --text-muted: #6a5840;
  --text-inverse: #1a1210;
  --accent: #b87333;
  --accent-hover: #cc8844;
  --accent-muted: rgba(184,115,51,0.15);
  --success: #6a9a55;
  --success-muted: rgba(106,154,85,0.15);
  --warning: #c89040;
  --warning-muted: rgba(200,144,64,0.15);
  --danger: #a85040;
  --danger-muted: rgba(168,80,64,0.15);
  --info: #5588aa;
  --info-muted: rgba(85,136,170,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(184,115,51,0.08);
}

/* 6. Arctic - Cool blue-white-ice */
[data-theme="arctic"] {
  --bg-primary: #0f1923;
  --bg-secondary: #152030;
  --bg-tertiary: #1a2838;
  --bg-card: #121c2a;
  --bg-card-hover: #182635;
  --bg-input: #0c1520;
  --border: #1e3040;
  --border-light: #182838;
  --text-primary: #d0e4f0;
  --text-secondary: #8ab0cc;
  --text-muted: #4a7090;
  --text-inverse: #0f1923;
  --accent: #5ba4cf;
  --accent-hover: #70b8e0;
  --accent-muted: rgba(91,164,207,0.15);
  --success: #4acc8a;
  --success-muted: rgba(74,204,138,0.15);
  --warning: #e0b050;
  --warning-muted: rgba(224,176,80,0.15);
  --danger: #e06060;
  --danger-muted: rgba(224,96,96,0.15);
  --info: #5ba4cf;
  --info-muted: rgba(91,164,207,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.35);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.45);
  --glow: 0 0 20px rgba(91,164,207,0.08);
}

/* 7. Slate - Sophisticated gray */
[data-theme="slate"] {
  --bg-primary: #18181b;
  --bg-secondary: #1e1e22;
  --bg-tertiary: #27272a;
  --bg-card: #1c1c20;
  --bg-card-hover: #252528;
  --bg-input: #141416;
  --border: #333338;
  --border-light: #2a2a2e;
  --text-primary: #d4d4d8;
  --text-secondary: #a1a1aa;
  --text-muted: #5e5e66;
  --text-inverse: #18181b;
  --accent: #a1a1aa;
  --accent-hover: #c4c4cc;
  --accent-muted: rgba(161,161,170,0.12);
  --success: #5cb87a;
  --success-muted: rgba(92,184,122,0.12);
  --warning: #d4a03c;
  --warning-muted: rgba(212,160,60,0.12);
  --danger: #c75a5a;
  --danger-muted: rgba(199,90,90,0.12);
  --info: #6a8cba;
  --info-muted: rgba(106,140,186,0.12);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: none;
}

/* 8. Forest - Deep rich greens */
[data-theme="forest"] {
  --bg-primary: #0a1a0e;
  --bg-secondary: #102216;
  --bg-tertiary: #162a1c;
  --bg-card: #0e1e12;
  --bg-card-hover: #14281a;
  --bg-input: #081408;
  --border: #1e3e22;
  --border-light: #18301c;
  --text-primary: #b8d4bc;
  --text-secondary: #80aa84;
  --text-muted: #4a7050;
  --text-inverse: #0a1a0e;
  --accent: #4a8c5c;
  --accent-hover: #5ca870;
  --accent-muted: rgba(74,140,92,0.15);
  --success: #4acc8a;
  --success-muted: rgba(74,204,138,0.15);
  --warning: #d4a03c;
  --warning-muted: rgba(212,160,60,0.15);
  --danger: #c75a5a;
  --danger-muted: rgba(199,90,90,0.15);
  --info: #5a8ec7;
  --info-muted: rgba(90,142,199,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(74,140,92,0.08);
}

/* 9. Copper - Industrial warm metallic */
[data-theme="copper"] {
  --bg-primary: #1a1410;
  --bg-secondary: #221c16;
  --bg-tertiary: #2a221a;
  --bg-card: #1e1812;
  --bg-card-hover: #28201a;
  --bg-input: #14100a;
  --border: #3e3028;
  --border-light: #302620;
  --text-primary: #d4c0a8;
  --text-secondary: #aa9070;
  --text-muted: #6a5840;
  --text-inverse: #1a1410;
  --accent: #cd7f32;
  --accent-hover: #da9244;
  --accent-muted: rgba(205,127,50,0.15);
  --success: #5cb87a;
  --success-muted: rgba(92,184,122,0.15);
  --warning: #e0a030;
  --warning-muted: rgba(224,160,48,0.15);
  --danger: #c75a5a;
  --danger-muted: rgba(199,90,90,0.15);
  --info: #5a8ec7;
  --info-muted: rgba(90,142,199,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(205,127,50,0.08);
}

/* 10. High Contrast - Accessibility */
[data-theme="high-contrast"] {
  --bg-primary: #000000;
  --bg-secondary: #0a0a0a;
  --bg-tertiary: #141414;
  --bg-card: #0a0a0a;
  --bg-card-hover: #1a1a1a;
  --bg-input: #000000;
  --border: #444444;
  --border-light: #2a2a2a;
  --text-primary: #ffffff;
  --text-secondary: #cccccc;
  --text-muted: #888888;
  --text-inverse: #000000;
  --accent: #ffcc00;
  --accent-hover: #ffdd44;
  --accent-muted: rgba(255,204,0,0.15);
  --success: #00ff88;
  --success-muted: rgba(0,255,136,0.15);
  --warning: #ffaa00;
  --warning-muted: rgba(255,170,0,0.15);
  --danger: #ff4444;
  --danger-muted: rgba(255,68,68,0.15);
  --info: #44aaff;
  --info-muted: rgba(68,170,255,0.15);
  --shadow: 0 2px 12px rgba(0,0,0,0.6);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.7);
  --glow: 0 0 20px rgba(255,204,0,0.1);
}

/* --- LAYOUT --- */
#app {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* --- LOADING SCREEN --- */
#loading-screen {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}
#loading-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.loader-content { text-align: center; }
.loader-logo { margin-bottom: 16px; animation: pulse 2s infinite; }
.loader-text { color: var(--text-primary); font-size: 1.25rem; font-weight: 600; letter-spacing: 0.05em; margin-bottom: 24px; }
.loader-bar { width: 200px; height: 3px; background: var(--border); border-radius: 2px; overflow: hidden; }
.loader-fill { width: 0%; height: 100%; background: var(--accent); border-radius: 2px; animation: loading 1.5s ease-in-out forwards; }
@keyframes loading { 0% { width: 0%; } 100% { width: 100%; } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

/* --- SIDEBAR --- */
#sidebar {
  width: 250px;
  min-width: 250px;
  height: 100vh;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease, min-width 0.3s ease, transform 0.3s ease;
  z-index: 100;
}
#sidebar.collapsed { width: 64px; min-width: 64px; }
#sidebar.collapsed .logo-text,
#sidebar.collapsed .nav-label,
#sidebar.collapsed .nav-badge,
#sidebar.collapsed .nav-section-label,
#sidebar.collapsed .theme-name,
#sidebar.collapsed .version-info { display: none; }
#sidebar.collapsed .nav-item { justify-content: center; padding: 10px 0; }
#sidebar.collapsed .sidebar-header { justify-content: center; padding: 16px 8px; }
#sidebar.collapsed #sidebar-collapse { transform: rotate(180deg); }

.sidebar-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 16px 12px;
  border-bottom: 1px solid var(--border);
}
.logo-mark { flex-shrink: 0; }
.logo-text { flex: 1; min-width: 0; }
.logo-title { display: block; font-weight: 700; font-size: 0.92rem; color: var(--text-primary); letter-spacing: 0.02em; white-space: nowrap; }
.logo-subtitle { display: block; font-size: 0.7rem; color: var(--text-muted); font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; }

.sidebar-nav { flex: 1; overflow-y: auto; padding: 8px 0; }
.nav-section-label {
  padding: 16px 16px 4px;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-muted);
}
.nav-items { list-style: none; }
.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 16px;
  margin: 1px 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  color: var(--text-secondary);
  font-size: 0.85rem;
  font-weight: 500;
  position: relative;
}
.nav-item:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.nav-item.active {
  background: var(--accent-muted);
  color: var(--accent);
}
.nav-item.active::before {
  content: '';
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 20px;
  background: var(--accent);
  border-radius: 0 3px 3px 0;
}
.nav-icon { display: flex; align-items: center; flex-shrink: 0; width: 20px; }
.nav-badge {
  margin-left: auto;
  background: var(--accent);
  color: var(--text-inverse);
  font-size: 0.65rem;
  font-weight: 700;
  padding: 1px 6px;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
}
.nav-badge:empty { display: none; }

.sidebar-footer {
  padding: 12px 16px;
  border-top: 1px solid var(--border);
}
.theme-quick-switch {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}
.theme-name { font-size: 0.75rem; color: var(--text-muted); }
.version-info { font-size: 0.65rem; color: var(--text-muted); font-family: 'JetBrains Mono', monospace; }

/* --- MAIN CONTENT --- */
#main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
}

/* --- TOPBAR --- */
#topbar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 24px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border);
  min-height: 52px;
  flex-shrink: 0;
}
.topbar-breadcrumb {
  font-size: 0.85rem;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 6px;
}
.topbar-breadcrumb .bc-sep { color: var(--text-muted); font-size: 0.7rem; }
.topbar-breadcrumb .bc-current { color: var(--text-primary); font-weight: 600; }
.topbar-actions { display: flex; align-items: center; gap: 8px; margin-left: auto; }

.search-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 6px 12px;
  min-width: 280px;
  transition: border-color 0.2s;
}
.search-box:focus-within { border-color: var(--accent); }
.search-box svg { color: var(--text-muted); flex-shrink: 0; }
.search-box input {
  background: none;
  border: none;
  outline: none;
  color: var(--text-primary);
  flex: 1;
  font-size: 0.82rem;
}
.search-box input::placeholder { color: var(--text-muted); }
.search-box kbd {
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 1px 5px;
  font-size: 0.65rem;
  color: var(--text-muted);
  font-family: 'Inter', sans-serif;
}

/* --- BUTTONS --- */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  border: 1px solid var(--border);
  border-radius: 6px;
  font-size: 0.82rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  white-space: nowrap;
}
.btn:hover { background: var(--bg-card-hover); border-color: var(--text-muted); }
.btn-accent {
  background: var(--accent);
  color: var(--text-inverse);
  border-color: var(--accent);
}
.btn-accent:hover { background: var(--accent-hover); border-color: var(--accent-hover); }
.btn-success { background: var(--success); color: #fff; border-color: var(--success); }
.btn-success:hover { filter: brightness(1.1); }
.btn-danger { background: var(--danger); color: #fff; border-color: var(--danger); }
.btn-danger:hover { filter: brightness(1.1); }
.btn-ghost { background: transparent; border-color: transparent; color: var(--text-secondary); }
.btn-ghost:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.btn-sm { padding: 4px 10px; font-size: 0.75rem; }
.btn-lg { padding: 10px 20px; font-size: 0.92rem; }
.btn-block { width: 100%; justify-content: center; }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }

.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}
.icon-btn:hover { background: var(--bg-tertiary); color: var(--text-primary); }

/* --- USER GUIDE --- */
.user-guide {
  margin: 16px 24px 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  transition: all 0.3s ease;
  flex-shrink: 0;
}
.guide-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  cursor: pointer;
  transition: background 0.15s;
}
.guide-header:hover { background: var(--bg-card-hover); }
.guide-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
}
.guide-title svg { color: var(--accent); }
.guide-chevron { color: var(--text-muted); transition: transform 0.3s ease; }
.user-guide.collapsed .guide-chevron { transform: rotate(-90deg); }
.guide-content {
  padding: 0 16px 16px;
  font-size: 0.82rem;
  color: var(--text-secondary);
  line-height: 1.7;
  max-height: 400px;
  overflow-y: auto;
}
.user-guide.collapsed .guide-content { display: none; }
.guide-content h4 { color: var(--text-primary); margin: 12px 0 6px; font-size: 0.85rem; }
.guide-content p { margin-bottom: 8px; }
.guide-content ul { padding-left: 20px; margin-bottom: 8px; }
.guide-content li { margin-bottom: 4px; }
.guide-content code {
  background: var(--bg-tertiary);
  padding: 1px 5px;
  border-radius: 3px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem;
}
.guide-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
  margin-top: 12px;
}
.guide-step {
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
}
.guide-step-num {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: var(--accent);
  color: var(--text-inverse);
  border-radius: 50%;
  font-size: 0.7rem;
  font-weight: 700;
  margin-bottom: 6px;
}
.guide-step h5 { font-size: 0.8rem; color: var(--text-primary); margin-bottom: 4px; }
.guide-step p { font-size: 0.75rem; color: var(--text-muted); margin: 0; }

/* --- PAGE CONTENT --- */
#page-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px 24px 40px;
}

/* --- CARDS --- */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px;
  transition: all 0.2s ease;
  box-shadow: var(--shadow);
}
.card:hover { box-shadow: var(--shadow-lg); }
.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.card-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-title svg { color: var(--accent); }
.card-subtitle { font-size: 0.75rem; color: var(--text-muted); margin-top: 2px; }
.card-body { color: var(--text-secondary); font-size: 0.85rem; }
.card-footer {
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-flush { padding: 0; }
.card-flush .card-header { padding: 16px 20px; margin-bottom: 0; }
.card-flush .card-body { padding: 0 20px 20px; }

/* --- KPI CARDS --- */
.kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px; }
.kpi-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px 20px;
  position: relative;
  overflow: hidden;
}
.kpi-card::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--accent);
  opacity: 0.6;
}
.kpi-label { font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em; font-weight: 600; margin-bottom: 4px; }
.kpi-value {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--text-primary);
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: -0.02em;
}
.kpi-change {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 0.72rem;
  font-weight: 600;
  margin-top: 4px;
  padding: 2px 6px;
  border-radius: 4px;
}
.kpi-change.up { color: var(--success); background: var(--success-muted); }
.kpi-change.down { color: var(--danger); background: var(--danger-muted); }

/* --- FORMS --- */
.form-group { margin-bottom: 16px; }
.form-label {
  display: block;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
.form-input, .form-select, .form-textarea {
  width: 100%;
  padding: 8px 12px;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 0.85rem;
  transition: border-color 0.2s, box-shadow 0.2s;
  outline: none;
}
.form-input:focus, .form-select:focus, .form-textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-muted);
}
.form-input::placeholder, .form-textarea::placeholder { color: var(--text-muted); }
.form-textarea { resize: vertical; min-height: 80px; line-height: 1.6; }
.form-select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b5e50' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  padding-right: 30px;
}
.form-select option { background: var(--bg-secondary); color: var(--text-primary); }
.form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
.form-help { font-size: 0.72rem; color: var(--text-muted); margin-top: 4px; }

/* --- RADIO & CHECKBOX --- */
.radio-group, .checkbox-group { display: flex; flex-wrap: wrap; gap: 8px; }
.radio-card, .checkbox-card {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px 16px;
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  flex: 1;
  min-width: 200px;
  background: var(--bg-input);
}
.radio-card:hover, .checkbox-card:hover { border-color: var(--accent); background: var(--accent-muted); }
.radio-card.selected, .checkbox-card.selected { border-color: var(--accent); background: var(--accent-muted); }
.radio-card input, .checkbox-card input { display: none; }
.radio-dot {
  width: 18px;
  height: 18px;
  border: 2px solid var(--border);
  border-radius: 50%;
  flex-shrink: 0;
  position: relative;
  margin-top: 1px;
  transition: border-color 0.2s;
}
.radio-card.selected .radio-dot { border-color: var(--accent); }
.radio-card.selected .radio-dot::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
}
.radio-info h4 { font-size: 0.85rem; color: var(--text-primary); font-weight: 600; margin-bottom: 2px; }
.radio-info p { font-size: 0.75rem; color: var(--text-muted); margin: 0; line-height: 1.4; }

/* --- DELIVERY MODEL SELECTOR --- */
.delivery-model-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}
.delivery-model-card {
  background: var(--bg-input);
  border: 2px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}
.delivery-model-card:hover { border-color: var(--text-muted); transform: translateY(-1px); }
.delivery-model-card.active {
  border-color: var(--accent);
  background: var(--accent-muted);
  box-shadow: var(--glow);
}
.delivery-model-card.active::after {
  content: '';
  position: absolute;
  top: 8px;
  right: 8px;
  width: 20px;
  height: 20px;
  background: var(--accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%230a0e1a' stroke-width='3'%3E%3Cpath d='M20 6L9 17l-5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}
.dm-icon { font-size: 1.5rem; margin-bottom: 8px; }
.dm-title { font-size: 0.85rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
.dm-desc { font-size: 0.72rem; color: var(--text-muted); line-height: 1.5; }
.dm-phases { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); }
.dm-phase-tag {
  display: inline-block;
  padding: 2px 7px;
  font-size: 0.65rem;
  font-weight: 600;
  background: var(--bg-tertiary);
  border-radius: 4px;
  color: var(--text-secondary);
  margin: 2px 2px 2px 0;
}
.delivery-model-card.active .dm-phase-tag { background: var(--accent-muted); color: var(--accent); }

/* --- FILE UPLOAD ZONES --- */
.upload-zone {
  border: 2px dashed var(--border);
  border-radius: 10px;
  padding: 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--bg-input);
}
.upload-zone:hover { border-color: var(--accent); background: var(--accent-muted); }
.upload-zone.drag-over { border-color: var(--accent); background: var(--accent-muted); transform: scale(1.01); }
.upload-icon { color: var(--text-muted); margin-bottom: 8px; }
.upload-title { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
.upload-subtitle { font-size: 0.75rem; color: var(--text-muted); }
.upload-limit { font-size: 0.65rem; color: var(--text-muted); margin-top: 6px; font-family: 'JetBrains Mono', monospace; }
.upload-file-list { margin-top: 12px; }
.upload-file-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-bottom: 6px;
  font-size: 0.8rem;
}
.upload-file-item .file-name { flex: 1; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.upload-file-item .file-size { color: var(--text-muted); font-family: 'JetBrains Mono', monospace; font-size: 0.72rem; }
.upload-file-item .file-remove { color: var(--danger); cursor: pointer; }
.upload-file-item .file-remove:hover { color: var(--danger); filter: brightness(1.3); }
.file-icon { color: var(--accent); flex-shrink: 0; }
.upload-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; }

/* --- TABS --- */
.tabs {
  display: flex;
  gap: 2px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 16px;
  overflow-x: auto;
  flex-shrink: 0;
}
.tab {
  padding: 10px 16px;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-muted);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s ease;
  white-space: nowrap;
}
.tab:hover { color: var(--text-primary); }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* --- TABLES --- */
.table-container { overflow-x: auto; border: 1px solid var(--border); border-radius: 8px; }
table { width: 100%; border-collapse: collapse; }
thead th {
  padding: 10px 14px;
  font-size: 0.72rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  text-align: left;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
  position: sticky;
  top: 0;
  z-index: 1;
}
thead th.sortable { cursor: pointer; }
thead th.sortable:hover { color: var(--text-primary); }
tbody td {
  padding: 10px 14px;
  font-size: 0.82rem;
  border-bottom: 1px solid var(--border-light);
  color: var(--text-secondary);
}
tbody tr:hover { background: var(--bg-card-hover); }
tbody tr:last-child td { border-bottom: none; }
.cell-mono {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem;
  letter-spacing: -0.02em;
}
.cell-bold { font-weight: 600; color: var(--text-primary); }
.cell-accent { color: var(--accent); font-weight: 600; }
.cell-right { text-align: right; }
.cell-center { text-align: center; }
.table-footer {
  background: var(--bg-tertiary);
  border-top: 2px solid var(--border);
}
.table-footer td { font-weight: 700; color: var(--text-primary); }

/* --- STATUS BADGES --- */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border-radius: 5px;
  font-size: 0.68rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.badge-draft { background: var(--info-muted); color: var(--info); }
.badge-active { background: var(--success-muted); color: var(--success); }
.badge-sent { background: var(--warning-muted); color: var(--warning); }
.badge-won { background: var(--success-muted); color: var(--success); }
.badge-lost { background: var(--danger-muted); color: var(--danger); }
.badge-revised { background: var(--accent-muted); color: var(--accent); }
.badge-expired { background: var(--danger-muted); color: var(--danger); }

/* --- ASSUMPTIONS BOX --- */
.assumptions-box {
  background: var(--bg-card);
  border: 1px solid var(--accent);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 20px;
}
.assumptions-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--accent-muted);
  border-bottom: 1px solid var(--accent);
  font-weight: 600;
  font-size: 0.85rem;
  color: var(--accent);
}
.assumptions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1px;
  background: var(--border);
  padding: 1px;
}
.assumption-item {
  background: var(--bg-card);
  padding: 12px 16px;
}
.assumption-label {
  font-size: 0.68rem;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  margin-bottom: 3px;
}
.assumption-value {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.92rem;
  font-weight: 600;
  color: var(--text-primary);
}
.assumption-value.editable {
  cursor: pointer;
  border-bottom: 1px dashed var(--text-muted);
  display: inline-block;
}
.assumption-value.editable:hover { border-color: var(--accent); color: var(--accent); }

/* --- ESTIMATE OUTPUT SECTION --- */
.output-summary {
  display: grid;
  grid-template-columns: 1fr 280px;
  gap: 20px;
  margin-top: 20px;
}
.output-summary-full { grid-template-columns: 1fr; }
.summary-total {
  background: var(--accent-muted);
  border: 1px solid var(--accent);
  border-radius: 10px;
  padding: 20px;
}
.summary-total-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 4px; }
.summary-total-value {
  font-size: 2rem;
  font-weight: 800;
  color: var(--accent);
  font-family: 'JetBrains Mono', monospace;
  letter-spacing: -0.02em;
}
.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  font-size: 0.82rem;
}
.summary-row-label { color: var(--text-secondary); }
.summary-row-value { color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-weight: 600; }
.summary-divider { border-top: 1px solid var(--border); margin: 8px 0; }

/* --- CONNECTOR PANEL --- */
.connector-panel {
  width: 380px;
  min-width: 380px;
  height: 100vh;
  background: var(--bg-secondary);
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  transition: transform 0.3s ease, opacity 0.3s ease;
  z-index: 90;
}
.connector-panel.hidden { display: none; }
.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}
.panel-header h3 { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }
.panel-content { flex: 1; overflow-y: auto; padding: 16px; }
.connector-item {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 14px;
  margin-bottom: 8px;
  cursor: grab;
  transition: all 0.15s ease;
  font-size: 0.82rem;
}
.connector-item:hover { border-color: var(--accent); }
.connector-item:active { cursor: grabbing; opacity: 0.8; }
.connector-item-title { font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
.connector-item-meta { font-size: 0.72rem; color: var(--text-muted); }
.connector-item-cost { font-family: 'JetBrains Mono', monospace; color: var(--accent); font-weight: 600; }
.drag-handle { color: var(--text-muted); margin-right: 8px; cursor: grab; }

/* --- MODAL --- */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.modal-overlay.hidden { display: none; }
.modal {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-lg);
}
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
}
.modal-header h3 { font-size: 1rem; font-weight: 600; color: var(--text-primary); }
.modal-body { padding: 20px; overflow-y: auto; flex: 1; }
.modal-footer {
  padding: 12px 20px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
}

/* --- TOAST --- */
.toast-container {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2000;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.toast {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px 16px;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 280px;
  max-width: 400px;
  animation: toastIn 0.3s ease;
  font-size: 0.82rem;
}
.toast.leaving { animation: toastOut 0.3s ease forwards; }
.toast-success { border-left: 3px solid var(--success); }
.toast-error { border-left: 3px solid var(--danger); }
.toast-warning { border-left: 3px solid var(--warning); }
.toast-info { border-left: 3px solid var(--info); }
@keyframes toastIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes toastOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }

/* --- COMMAND PALETTE --- */
.command-palette { position: fixed; inset: 0; z-index: 3000; }
.command-palette.hidden { display: none; }
.palette-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
.palette-dialog {
  position: relative;
  max-width: 520px;
  margin: 15vh auto 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow-lg);
}
.palette-dialog input {
  width: 100%;
  padding: 14px 18px;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--border);
  color: var(--text-primary);
  font-size: 0.95rem;
  outline: none;
}
.palette-dialog input::placeholder { color: var(--text-muted); }
.palette-results { max-height: 320px; overflow-y: auto; padding: 6px; }
.palette-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-secondary);
  transition: all 0.1s;
}
.palette-item:hover, .palette-item.selected { background: var(--accent-muted); color: var(--text-primary); }
.palette-item-icon { color: var(--text-muted); width: 20px; text-align: center; }
.palette-item-label { flex: 1; }
.palette-item-shortcut { font-size: 0.72rem; color: var(--text-muted); font-family: 'JetBrains Mono', monospace; }

/* --- SECTION HEADERS --- */
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.section-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
}
.section-title svg { color: var(--accent); }
.section-desc { font-size: 0.78rem; color: var(--text-muted); margin-top: 2px; }
.section-actions { display: flex; gap: 6px; }

/* --- PRICING LIBRARY --- */
.pricing-category {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  margin-bottom: 12px;
  overflow: hidden;
}
.pricing-category-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  cursor: pointer;
  transition: background 0.15s;
}
.pricing-category-header:hover { background: var(--bg-card-hover); }
.pricing-category-title { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); }
.pricing-category-count { font-size: 0.72rem; color: var(--text-muted); }

/* --- PAST ESTIMATES --- */
.estimate-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px 20px;
  margin-bottom: 12px;
  transition: all 0.2s ease;
  cursor: pointer;
}
.estimate-card:hover { border-color: var(--accent); transform: translateY(-1px); box-shadow: var(--shadow); }
.estimate-card-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 10px; }
.estimate-card-title { font-size: 0.95rem; font-weight: 700; color: var(--text-primary); }
.estimate-card-meta { display: flex; flex-wrap: wrap; gap: 12px; font-size: 0.75rem; color: var(--text-muted); }
.estimate-card-meta span { display: flex; align-items: center; gap: 4px; }
.estimate-card-costs {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 8px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}
.estimate-cost-item {}
.estimate-cost-label { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em; }
.estimate-cost-value { font-family: 'JetBrains Mono', monospace; font-size: 0.82rem; font-weight: 600; color: var(--text-primary); }

/* --- COMPARISON VIEW --- */
.comparison-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.comparison-column { }
.comparison-column h4 { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); margin-bottom: 12px; }
.comparison-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}
.comparison-bar-label { font-size: 0.75rem; color: var(--text-secondary); width: 100px; flex-shrink: 0; }
.comparison-bar-track { flex: 1; height: 6px; background: var(--bg-tertiary); border-radius: 3px; overflow: hidden; }
.comparison-bar-fill { height: 100%; border-radius: 3px; background: var(--accent); transition: width 0.5s ease; }
.comparison-bar-value { font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: var(--text-primary); width: 80px; text-align: right; flex-shrink: 0; }

/* --- SETTINGS - THEME GRID --- */
.theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
}
.theme-card {
  border: 2px solid var(--border);
  border-radius: 10px;
  padding: 12px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
}
.theme-card:hover { border-color: var(--text-muted); transform: translateY(-2px); }
.theme-card.active { border-color: var(--accent); box-shadow: var(--glow); }
.theme-preview {
  width: 100%;
  height: 50px;
  border-radius: 6px;
  margin-bottom: 8px;
  border: 1px solid rgba(255,255,255,0.05);
}
.theme-card-name { font-size: 0.8rem; font-weight: 600; color: var(--text-primary); }

/* --- Q&A PAGE --- */
.qa-item {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  margin-bottom: 8px;
  overflow: hidden;
}
.qa-question {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
  transition: background 0.15s;
}
.qa-question:hover { background: var(--bg-card-hover); }
.qa-answer {
  padding: 0 16px 14px;
  font-size: 0.82rem;
  color: var(--text-secondary);
  line-height: 1.7;
  display: none;
}
.qa-item.open .qa-answer { display: block; }
.qa-item.open .qa-question svg { transform: rotate(180deg); }

/* --- ANALYTICS CHARTS --- */
.chart-container {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 16px;
}
.chart-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.chart-title { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }
.mini-chart { width: 100%; }
.bar-chart-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}
.bar-chart-label { width: 120px; font-size: 0.75rem; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.bar-chart-track { flex: 1; height: 22px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; position: relative; }
.bar-chart-fill {
  height: 100%;
  border-radius: 4px;
  background: var(--accent);
  transition: width 0.8s ease;
  display: flex;
  align-items: center;
  padding-left: 8px;
}
.bar-chart-value { font-family: 'JetBrains Mono', monospace; font-size: 0.72rem; font-weight: 600; color: var(--text-inverse); white-space: nowrap; }
.bar-chart-amount { width: 90px; font-family: 'JetBrains Mono', monospace; font-size: 0.78rem; color: var(--text-primary); text-align: right; font-weight: 600; }

/* --- EMPTY STATE --- */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: var(--text-muted);
}
.empty-state svg { margin-bottom: 16px; opacity: 0.3; }
.empty-state h3 { font-size: 1rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; }
.empty-state p { font-size: 0.82rem; max-width: 300px; margin: 0 auto; }

/* --- UTILITY CLASSES --- */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
.flex { display: flex; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-4 { gap: 4px; }
.gap-8 { gap: 8px; }
.gap-12 { gap: 12px; }
.gap-16 { gap: 16px; }
.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mt-16 { margin-top: 16px; }
.mt-20 { margin-top: 20px; }
.mt-24 { margin-top: 24px; }
.mb-8 { margin-bottom: 8px; }
.mb-12 { margin-bottom: 12px; }
.mb-16 { margin-bottom: 16px; }
.mb-20 { margin-bottom: 20px; }
.p-16 { padding: 16px; }
.text-mono { font-family: 'JetBrains Mono', monospace; }
.text-sm { font-size: 0.78rem; }
.text-xs { font-size: 0.68rem; }
.text-muted { color: var(--text-muted); }
.text-accent { color: var(--accent); }
.text-success { color: var(--success); }
.text-danger { color: var(--danger); }
.text-right { text-align: right; }
.text-center { text-align: center; }
.font-bold { font-weight: 700; }
.hidden { display: none !important; }
.mobile-only { display: none; }

/* --- DRAG AND DROP --- */
.drop-target { outline: 2px dashed var(--accent); outline-offset: -2px; background: var(--accent-muted); }
.dragging { opacity: 0.5; }
[draggable="true"] { cursor: grab; }
[draggable="true"]:active { cursor: grabbing; }

/* --- LINE ITEM ROWS (editable) --- */
.line-item-row {
  display: grid;
  grid-template-columns: 40px 1fr 80px 80px 100px 120px 40px;
  gap: 8px;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-light);
  transition: background 0.1s;
}
.line-item-row:hover { background: var(--bg-card-hover); }
.line-item-row.subtotal-row {
  background: var(--bg-tertiary);
  font-weight: 700;
  border-bottom: 2px solid var(--border);
}
.line-item-row.total-row {
  background: var(--accent-muted);
  font-weight: 700;
  border-bottom: none;
}
.line-item-input {
  background: transparent;
  border: 1px solid transparent;
  border-radius: 4px;
  padding: 4px 6px;
  color: var(--text-primary);
  font-size: 0.82rem;
  transition: border-color 0.2s;
  width: 100%;
}
.line-item-input:hover { border-color: var(--border); }
.line-item-input:focus { border-color: var(--accent); outline: none; background: var(--bg-input); }
.line-item-input.numeric {
  font-family: 'JetBrains Mono', monospace;
  text-align: right;
  font-size: 0.78rem;
}
.line-item-grip { color: var(--text-muted); cursor: grab; text-align: center; }
.line-item-delete { color: var(--text-muted); cursor: pointer; text-align: center; }
.line-item-delete:hover { color: var(--danger); }
.line-items-header {
  display: grid;
  grid-template-columns: 40px 1fr 80px 80px 100px 120px 40px;
  gap: 8px;
  padding: 8px 0;
  border-bottom: 2px solid var(--border);
  font-size: 0.68rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-muted);
}

/* --- RESPONSIVE --- */
@media (max-width: 1024px) {
  .grid-2 { grid-template-columns: 1fr; }
  .grid-3 { grid-template-columns: 1fr; }
  .delivery-model-grid { grid-template-columns: 1fr 1fr; }
  .comparison-grid { grid-template-columns: 1fr; }
  .output-summary { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
  #sidebar { position: fixed; left: 0; top: 0; transform: translateX(-100%); z-index: 200; }
  #sidebar.mobile-open { transform: translateX(0); }
  .mobile-only { display: flex; }
  #page-content { padding: 16px; }
  .search-box { min-width: 180px; }
  .search-box kbd { display: none; }
  .delivery-model-grid { grid-template-columns: 1fr; }
  .kpi-grid { grid-template-columns: 1fr 1fr; }
  .upload-grid { grid-template-columns: 1fr; }
  .connector-panel { width: 100%; min-width: 100%; }
}

/* --- ANIMATIONS --- */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
.fade-in { animation: fadeIn 0.3s ease; }
.slide-up { animation: slideUp 0.3s ease; }

/* --- DECORATIVE TECHNICAL ELEMENTS --- */
.tech-grid-bg {
  background-image:
    linear-gradient(var(--border-light) 1px, transparent 1px),
    linear-gradient(90deg, var(--border-light) 1px, transparent 1px);
  background-size: 20px 20px;
  background-position: -1px -1px;
}
.section-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 24px 0 16px;
  color: var(--text-muted);
  font-size: 0.72rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}
.section-divider::before, .section-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* --- INLINE EDIT --- */
.inline-edit {
  display: inline-block;
  padding: 2px 6px;
  border: 1px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}
.inline-edit:hover { border-color: var(--border); background: var(--bg-input); }
.inline-edit:focus { border-color: var(--accent); background: var(--bg-input); outline: none; }

/* --- PRINT --- */
@media print {
  #sidebar, #topbar, .user-guide, .connector-panel, #toast-container, #command-palette, #modal-overlay { display: none !important; }
  #main-content { margin: 0; }
  body { background: white; color: black; }
  .card { box-shadow: none; border: 1px solid #ddd; }
}
